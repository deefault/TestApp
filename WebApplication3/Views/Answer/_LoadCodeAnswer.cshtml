@model CodeAnswer
<form method="post">
    <div>
        <h5 style="margin-top: 1rem;">@Model.Question.Title</h5>
        @if (Model.TestResult.IsCompleted)
        {
            <h5>Балл: @Model.Score/@Model.Question.Score</h5>
        }
    </div>
    <input type="hidden" value="@Model.Id">
    <fieldset id="options">
        <link rel="stylesheet" href="~/lib/codemirror/theme/material.css" />
        <link rel="stylesheet" href="~/lib/codemirror/lib/codemirror.css" />
        <link rel="stylesheet" href="~/lib/codemirror/addon/fold/foldgutter.css" />
        <link rel="stylesheet" href="~/lib/codemirror/addon/hint/show-hint.css" />
        <link rel="stylesheet" href="~/lib/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.css" />
        <div class="main">
            @if (Model.Code != null)
            {
                <div class="form-group clearfix contentwrapper" id="item-table__body">
                    <textarea class="form-control" id="code">@Model.Code.Value</textarea>
                    <span class="aside">
                        <em><b>Ctrl-Space</b>: autocomplete</em>
                    </span>
                </div>
            }
            else
            {
                <div class="form-group clearfix contentwrapper" id="item-table__body">
                    <textarea class="form-control" id="code">
using System;

namespace TestsApp
{
    public class Program
    {
        public string Main(string message)
        {
            return message;
        }
    }
}</textarea>
                    <span class="aside">
                        <em><b>Ctrl-Space</b>: autocomplete</em>
                    </span>
                </div>
            }
            <div style="margin-bottom: 1rem">
                <b>Аргументы:</b>
                <div class="input-group">
                    <input id="args" value="@(Model.Code != null ? Model.Code.Args : "Hello World")" class="form-control">
                    <span class="input-group-append">
                        <button class="btn btn-success" id="compile">Запуск</button>
                    </span>
                </div>
                <span class="aside">
                    <em>Use <b>;</b> to separate multiple</em>
                </span>
            </div>
        </div>
        <div id="outputDiv">
            <div>
                <b>Вывод:</b>
                <pre id="output" class="form-control" readonly=""></pre>
            </div>
        </div>
        <script src="~/lib/codemirror/lib/codemirror.js"></script>
        <script src="~/lib/codemirror/mode/clike/clike.js"></script>
        <script src="~/lib/codemirror/mode/python/python.js"></script>
        <script src="~/lib/codemirror/keymap/sublime.js"></script>
        <script src="~/lib/codemirror/addon/fold/foldcode.js"></script>
        <script src="~/lib/codemirror/addon/fold/foldgutter.js"></script>
        <script src="~/lib/codemirror/addon/fold/brace-fold.js"></script>
        <script src="~/lib/codemirror/addon/fold/comment-fold.js"></script>
        <script src="~/lib/codemirror/addon/edit/closebrackets.js"></script>
        <script src="~/lib/codemirror/addon/edit/trailingspace.js"></script>
        <script src="~/lib/codemirror/addon/edit/matchbrackets.js"></script>
        <script src="~/lib/codemirror/addon/hint/anyword-hint.js"></script>
        <script src="~/lib/codemirror/addon/hint/show-hint.js"></script>
        <script src="~/lib/codemirror/addon/selection/active-line.js"></script>
        <script>
            loadAnswerOutput();
            var elements =
            {
                args: $("#args"),
                compile: $("#compile"),
                output: $("#output"),
                code: $("#code"),
            };
            var editor = CodeMirror.fromTextArea(document.getElementById('code'),
                {
                    lineNumbers: true,
                    mode: "text/x-csharp",
                    theme: "material",
                    autoCloseBrackets: true,
                    matchBrackets: true,
                    styleActiveLine: true,
                    styleActiveSelected: true,
                    showCursorWhenSelecting: true,
                    indentUnit: 4,
                    tabSize: 4,
                    keyMap: "sublime",
                    rulers: [{ column: 80, lineStyle: "dashed" }],
                    foldGutter: true,
                    gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"],
                    extraKeys: { "Ctrl-Space": "autocomplete" }
                });
            elements.compile.click(function (e) {
                e.preventDefault();
                ShowOutput("Waiting for server...");
                Compile();
            });
            $(".CodeMirror").addClass("contentwrapper");
            function ShowOutput(output) {
                $("#output").html(output);
            }
            function Compile() {
                submitAnswerCode();
                loadAnswerOutput();
            }
        </script>
    </fieldset>
</form>